"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/search";
exports.ids = ["pages/api/search"];
exports.modules = {

/***/ "(api)/./pages/api/search.ts":
/*!*****************************!*\
  !*** ./pages/api/search.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// Helper function to transform API data to match the Card component's expected format\nfunction transformData(originalData) {\n    // Handle the specific format from the example response\n    if (originalData && typeof originalData === \"object\" && originalData.status === \"success\" && Array.isArray(originalData.data)) {\n        return originalData.data.map((item, index)=>transformItem(item, index));\n    }\n    // If it's already an array, try to transform each item\n    if (Array.isArray(originalData)) {\n        return originalData.map((item, index)=>transformItem(item, index));\n    }\n    // Check if data has a results or products array\n    if (originalData && typeof originalData === \"object\") {\n        if (Array.isArray(originalData.results)) {\n            return originalData.results.map((item, index)=>transformItem(item, index));\n        }\n        if (Array.isArray(originalData.products)) {\n            return originalData.products.map((item, index)=>transformItem(item, index));\n        }\n    }\n    // If we can't find a usable array, return an empty array\n    console.warn(\"Could not find usable data structure in API response\");\n    return [];\n}\n// Transform individual item to match the Card component's expected format\nfunction transformItem(item, index) {\n    // Create a base object with required fields\n    const transformedItem = {\n        id: item.id || `item-${index}`,\n        name: item.name || item.title || \"Product\",\n        description: item.description || \"No description available\",\n        // Extract the first image from the images array if it exists\n        image: item.images && item.images.length > 0 ? item.images[0] : item.image || item.imageUrl || item.image_url || item.img || \"https://via.placeholder.com/400\",\n        price: typeof item.price === \"number\" ? `$${item.price.toFixed(2)}` : item.price || \"$0.00\",\n        // Calculate average rating from reviews if available\n        rating: item.reviews && Array.isArray(item.reviews) && item.reviews.length > 0 ? item.reviews.reduce((sum, review)=>sum + (review.rating || 0), 0) / item.reviews.length : item.rating || 0,\n        // Additional fields that might be needed by the Card component\n        category: item.category || \"Uncategorized\",\n        // Add reviews count if available\n        reviewsCount: item.reviews && Array.isArray(item.reviews) ? item.reviews.length : 0,\n        // Add attributes if available\n        attributes: item.attributes || {},\n        // Preserve any other original fields\n        ...item\n    };\n    return transformedItem;\n}\nasync function handler(req, res) {\n    // Support both POST and GET methods\n    if (req.method !== \"POST\" && req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        // Get query from either POST body or GET query parameter\n        let query;\n        if (req.method === \"POST\") {\n            query = req.body.query;\n        } else {\n            // For GET requests\n            query = Array.isArray(req.query.query) ? req.query.query[0] : req.query.query;\n        }\n        if (!query) {\n            return res.status(400).json({\n                error: \"Query parameter is required\"\n            });\n        }\n        console.log(`Proxy API making ${req.method} request with query:`, query);\n        // First try POST method to the external API\n        try {\n            const response = await fetch(\"https://612d-164-67-70-232.ngrok-free.app/query\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    query\n                })\n            });\n            if (response.ok) {\n                const originalData = await response.json();\n                console.log(\"Proxy API received data from POST:\", JSON.stringify(originalData).substring(0, 200) + \"...\");\n                // Log the structure of the response to help with debugging\n                console.log(\"Response structure:\", {\n                    type: typeof originalData,\n                    isArray: Array.isArray(originalData),\n                    keys: originalData && typeof originalData === \"object\" ? Object.keys(originalData) : \"N/A\",\n                    hasStatus: originalData && typeof originalData === \"object\" && \"status\" in originalData,\n                    hasData: originalData && typeof originalData === \"object\" && \"data\" in originalData,\n                    dataType: originalData && typeof originalData === \"object\" && \"data\" in originalData ? Array.isArray(originalData.data) ? \"array\" : typeof originalData.data : \"N/A\",\n                    dataLength: originalData && typeof originalData === \"object\" && \"data\" in originalData && Array.isArray(originalData.data) ? originalData.data.length : \"N/A\"\n                });\n                // Transform the data to match the expected format\n                const transformedData = transformData(originalData);\n                console.log(`Transformed ${transformedData.length} items`);\n                // Return the transformed data to the client\n                return res.status(200).json({\n                    data: transformedData\n                });\n            } else {\n                console.log(`POST attempt failed with status ${response.status}, trying GET...`);\n            }\n        } catch (postError) {\n            console.log(\"POST request failed, falling back to GET:\", postError);\n        }\n        // If POST failed, try GET method as fallback\n        const encodedQuery = encodeURIComponent(query);\n        const getResponse = await fetch(`https://612d-164-67-70-232.ngrok-free.app/query?query=${encodedQuery}`, {\n            method: \"GET\",\n            headers: {\n                \"Accept\": \"application/json\"\n            }\n        });\n        if (!getResponse.ok) {\n            console.error(\"External API error (both POST and GET failed):\", getResponse.status);\n            return res.status(getResponse.status).json({\n                error: `External API error: ${getResponse.status} ${getResponse.statusText}`\n            });\n        }\n        const getOriginalData = await getResponse.json();\n        console.log(\"Proxy API received data from GET:\", JSON.stringify(getOriginalData).substring(0, 200) + \"...\");\n        // Log the structure of the response to help with debugging\n        console.log(\"GET response structure:\", {\n            type: typeof getOriginalData,\n            isArray: Array.isArray(getOriginalData),\n            keys: getOriginalData && typeof getOriginalData === \"object\" ? Object.keys(getOriginalData) : \"N/A\",\n            hasStatus: getOriginalData && typeof getOriginalData === \"object\" && \"status\" in getOriginalData,\n            hasData: getOriginalData && typeof getOriginalData === \"object\" && \"data\" in getOriginalData,\n            dataType: getOriginalData && typeof getOriginalData === \"object\" && \"data\" in getOriginalData ? Array.isArray(getOriginalData.data) ? \"array\" : typeof getOriginalData.data : \"N/A\",\n            dataLength: getOriginalData && typeof getOriginalData === \"object\" && \"data\" in getOriginalData && Array.isArray(getOriginalData.data) ? getOriginalData.data.length : \"N/A\"\n        });\n        // Transform the data to match the expected format\n        const transformedGetData = transformData(getOriginalData);\n        console.log(`Transformed ${transformedGetData.length} items from GET response`);\n        // Return the transformed data to the client\n        return res.status(200).json({\n            data: transformedGetData\n        });\n    } catch (error) {\n        console.error(\"Server error in proxy API:\", error);\n        return res.status(500).json({\n            error: \"Failed to fetch data from external API\"\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNnRSxlQUFlLENBQUM7UUFDekRwRCxPQUFPLENBQUMrQixHQUFHLENBQUMsQ0FBQyxZQUFZLEVBQUVzQixrQkFBa0IsQ0FBQzVDLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUM7UUFFaEYsNENBQTRDO1FBQzVDLE9BQU9nQixHQUFHLENBQUNuQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNxQyxJQUFJLENBQUM7WUFBRWxDLElBQUksRUFBRTRELGtCQUFrQjtTQUFFLENBQUMsQ0FBQztLQUMzRCxDQUFDLE9BQU96QixLQUFLLEVBQUU7UUFDZDVCLE9BQU8sQ0FBQzRCLEtBQUssQ0FBQyw0QkFBNEIsRUFBRUEsS0FBSyxDQUFDLENBQUM7UUFDbkQsT0FBT0gsR0FBRyxDQUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDcUMsSUFBSSxDQUFDO1lBQUVDLEtBQUssRUFBRSx3Q0FBd0M7U0FBRSxDQUFDLENBQUM7S0FDbEY7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZyYW1lci1jYXJkcy8uL3BhZ2VzL2FwaS9zZWFyY2gudHM/N2EwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcblxudHlwZSBSZXNwb25zZURhdGEgPSB7XG4gIGRhdGE/OiBhbnk7XG4gIGVycm9yPzogc3RyaW5nO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gdHJhbnNmb3JtIEFQSSBkYXRhIHRvIG1hdGNoIHRoZSBDYXJkIGNvbXBvbmVudCdzIGV4cGVjdGVkIGZvcm1hdFxuZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShvcmlnaW5hbERhdGE6IGFueSk6IGFueVtdIHtcbiAgLy8gSGFuZGxlIHRoZSBzcGVjaWZpYyBmb3JtYXQgZnJvbSB0aGUgZXhhbXBsZSByZXNwb25zZVxuICBpZiAob3JpZ2luYWxEYXRhICYmIFxuICAgICAgdHlwZW9mIG9yaWdpbmFsRGF0YSA9PT0gJ29iamVjdCcgJiYgXG4gICAgICBvcmlnaW5hbERhdGEuc3RhdHVzID09PSAnc3VjY2VzcycgJiYgXG4gICAgICBBcnJheS5pc0FycmF5KG9yaWdpbmFsRGF0YS5kYXRhKSkge1xuICAgIHJldHVybiBvcmlnaW5hbERhdGEuZGF0YS5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gdHJhbnNmb3JtSXRlbShpdGVtLCBpbmRleCkpO1xuICB9XG4gIFxuICAvLyBJZiBpdCdzIGFscmVhZHkgYW4gYXJyYXksIHRyeSB0byB0cmFuc2Zvcm0gZWFjaCBpdGVtXG4gIGlmIChBcnJheS5pc0FycmF5KG9yaWdpbmFsRGF0YSkpIHtcbiAgICByZXR1cm4gb3JpZ2luYWxEYXRhLm1hcCgoaXRlbSwgaW5kZXgpID0+IHRyYW5zZm9ybUl0ZW0oaXRlbSwgaW5kZXgpKTtcbiAgfVxuICBcbiAgLy8gQ2hlY2sgaWYgZGF0YSBoYXMgYSByZXN1bHRzIG9yIHByb2R1Y3RzIGFycmF5XG4gIGlmIChvcmlnaW5hbERhdGEgJiYgdHlwZW9mIG9yaWdpbmFsRGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcmlnaW5hbERhdGEucmVzdWx0cykpIHtcbiAgICAgIHJldHVybiBvcmlnaW5hbERhdGEucmVzdWx0cy5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gdHJhbnNmb3JtSXRlbShpdGVtLCBpbmRleCkpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcmlnaW5hbERhdGEucHJvZHVjdHMpKSB7XG4gICAgICByZXR1cm4gb3JpZ2luYWxEYXRhLnByb2R1Y3RzLm1hcCgoaXRlbTogYW55LCBpbmRleDogbnVtYmVyKSA9PiB0cmFuc2Zvcm1JdGVtKGl0ZW0sIGluZGV4KSk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBJZiB3ZSBjYW4ndCBmaW5kIGEgdXNhYmxlIGFycmF5LCByZXR1cm4gYW4gZW1wdHkgYXJyYXlcbiAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGZpbmQgdXNhYmxlIGRhdGEgc3RydWN0dXJlIGluIEFQSSByZXNwb25zZVwiKTtcbiAgcmV0dXJuIFtdO1xufVxuXG4vLyBUcmFuc2Zvcm0gaW5kaXZpZHVhbCBpdGVtIHRvIG1hdGNoIHRoZSBDYXJkIGNvbXBvbmVudCdzIGV4cGVjdGVkIGZvcm1hdFxuZnVuY3Rpb24gdHJhbnNmb3JtSXRlbShpdGVtOiBhbnksIGluZGV4OiBudW1iZXIpOiBhbnkge1xuICAvLyBDcmVhdGUgYSBiYXNlIG9iamVjdCB3aXRoIHJlcXVpcmVkIGZpZWxkc1xuICBjb25zdCB0cmFuc2Zvcm1lZEl0ZW0gPSB7XG4gICAgaWQ6IGl0ZW0uaWQgfHwgYGl0ZW0tJHtpbmRleH1gLFxuICAgIG5hbWU6IGl0ZW0ubmFtZSB8fCBpdGVtLnRpdGxlIHx8ICdQcm9kdWN0JyxcbiAgICBkZXNjcmlwdGlvbjogaXRlbS5kZXNjcmlwdGlvbiB8fCAnTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlJyxcbiAgICAvLyBFeHRyYWN0IHRoZSBmaXJzdCBpbWFnZSBmcm9tIHRoZSBpbWFnZXMgYXJyYXkgaWYgaXQgZXhpc3RzXG4gICAgaW1hZ2U6IGl0ZW0uaW1hZ2VzICYmIGl0ZW0uaW1hZ2VzLmxlbmd0aCA+IDAgXG4gICAgICA/IGl0ZW0uaW1hZ2VzWzBdIFxuICAgICAgOiAoaXRlbS5pbWFnZSB8fCBpdGVtLmltYWdlVXJsIHx8IGl0ZW0uaW1hZ2VfdXJsIHx8IGl0ZW0uaW1nIHx8ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vNDAwJyksXG4gICAgcHJpY2U6IHR5cGVvZiBpdGVtLnByaWNlID09PSAnbnVtYmVyJyBcbiAgICAgID8gYCQke2l0ZW0ucHJpY2UudG9GaXhlZCgyKX1gIFxuICAgICAgOiAoaXRlbS5wcmljZSB8fCAnJDAuMDAnKSxcbiAgICAvLyBDYWxjdWxhdGUgYXZlcmFnZSByYXRpbmcgZnJvbSByZXZpZXdzIGlmIGF2YWlsYWJsZVxuICAgIHJhdGluZzogaXRlbS5yZXZpZXdzICYmIEFycmF5LmlzQXJyYXkoaXRlbS5yZXZpZXdzKSAmJiBpdGVtLnJldmlld3MubGVuZ3RoID4gMFxuICAgICAgPyBpdGVtLnJldmlld3MucmVkdWNlKChzdW06IG51bWJlciwgcmV2aWV3OiBhbnkpID0+IHN1bSArIChyZXZpZXcucmF0aW5nIHx8IDApLCAwKSAvIGl0ZW0ucmV2aWV3cy5sZW5ndGhcbiAgICAgIDogKGl0ZW0ucmF0aW5nIHx8IDApLFxuICAgIC8vIEFkZGl0aW9uYWwgZmllbGRzIHRoYXQgbWlnaHQgYmUgbmVlZGVkIGJ5IHRoZSBDYXJkIGNvbXBvbmVudFxuICAgIGNhdGVnb3J5OiBpdGVtLmNhdGVnb3J5IHx8ICdVbmNhdGVnb3JpemVkJyxcbiAgICAvLyBBZGQgcmV2aWV3cyBjb3VudCBpZiBhdmFpbGFibGVcbiAgICByZXZpZXdzQ291bnQ6IGl0ZW0ucmV2aWV3cyAmJiBBcnJheS5pc0FycmF5KGl0ZW0ucmV2aWV3cykgPyBpdGVtLnJldmlld3MubGVuZ3RoIDogMCxcbiAgICAvLyBBZGQgYXR0cmlidXRlcyBpZiBhdmFpbGFibGVcbiAgICBhdHRyaWJ1dGVzOiBpdGVtLmF0dHJpYnV0ZXMgfHwge30sXG4gICAgLy8gUHJlc2VydmUgYW55IG90aGVyIG9yaWdpbmFsIGZpZWxkc1xuICAgIC4uLml0ZW1cbiAgfTtcbiAgXG4gIHJldHVybiB0cmFuc2Zvcm1lZEl0ZW07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPFJlc3BvbnNlRGF0YT5cbikge1xuICAvLyBTdXBwb3J0IGJvdGggUE9TVCBhbmQgR0VUIG1ldGhvZHNcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJyAmJiByZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gR2V0IHF1ZXJ5IGZyb20gZWl0aGVyIFBPU1QgYm9keSBvciBHRVQgcXVlcnkgcGFyYW1ldGVyXG4gICAgbGV0IHF1ZXJ5OiBzdHJpbmc7XG4gICAgXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgICAgcXVlcnkgPSByZXEuYm9keS5xdWVyeTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIEdFVCByZXF1ZXN0c1xuICAgICAgcXVlcnkgPSBBcnJheS5pc0FycmF5KHJlcS5xdWVyeS5xdWVyeSkgXG4gICAgICAgID8gcmVxLnF1ZXJ5LnF1ZXJ5WzBdIFxuICAgICAgICA6IChyZXEucXVlcnkucXVlcnkgYXMgc3RyaW5nKTtcbiAgICB9XG5cbiAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1F1ZXJ5IHBhcmFtZXRlciBpcyByZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFByb3h5IEFQSSBtYWtpbmcgJHtyZXEubWV0aG9kfSByZXF1ZXN0IHdpdGggcXVlcnk6YCwgcXVlcnkpO1xuXG4gICAgLy8gRmlyc3QgdHJ5IFBPU1QgbWV0aG9kIHRvIHRoZSBleHRlcm5hbCBBUElcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly82MTJkLTE2NC02Ny03MC0yMzIubmdyb2stZnJlZS5hcHAvcXVlcnknLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHF1ZXJ5XG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBvcmlnaW5hbERhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQcm94eSBBUEkgcmVjZWl2ZWQgZGF0YSBmcm9tIFBPU1Q6JywgSlNPTi5zdHJpbmdpZnkob3JpZ2luYWxEYXRhKS5zdWJzdHJpbmcoMCwgMjAwKSArICcuLi4nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIExvZyB0aGUgc3RydWN0dXJlIG9mIHRoZSByZXNwb25zZSB0byBoZWxwIHdpdGggZGVidWdnaW5nXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSBzdHJ1Y3R1cmU6Jywge1xuICAgICAgICAgIHR5cGU6IHR5cGVvZiBvcmlnaW5hbERhdGEsXG4gICAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheShvcmlnaW5hbERhdGEpLFxuICAgICAgICAgIGtleXM6IG9yaWdpbmFsRGF0YSAmJiB0eXBlb2Ygb3JpZ2luYWxEYXRhID09PSAnb2JqZWN0JyA/IE9iamVjdC5rZXlzKG9yaWdpbmFsRGF0YSkgOiAnTi9BJyxcbiAgICAgICAgICBoYXNTdGF0dXM6IG9yaWdpbmFsRGF0YSAmJiB0eXBlb2Ygb3JpZ2luYWxEYXRhID09PSAnb2JqZWN0JyAmJiAnc3RhdHVzJyBpbiBvcmlnaW5hbERhdGEsXG4gICAgICAgICAgaGFzRGF0YTogb3JpZ2luYWxEYXRhICYmIHR5cGVvZiBvcmlnaW5hbERhdGEgPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBvcmlnaW5hbERhdGEsXG4gICAgICAgICAgZGF0YVR5cGU6IG9yaWdpbmFsRGF0YSAmJiB0eXBlb2Ygb3JpZ2luYWxEYXRhID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gb3JpZ2luYWxEYXRhID8gXG4gICAgICAgICAgICAoQXJyYXkuaXNBcnJheShvcmlnaW5hbERhdGEuZGF0YSkgPyAnYXJyYXknIDogdHlwZW9mIG9yaWdpbmFsRGF0YS5kYXRhKSA6ICdOL0EnLFxuICAgICAgICAgIGRhdGFMZW5ndGg6IG9yaWdpbmFsRGF0YSAmJiB0eXBlb2Ygb3JpZ2luYWxEYXRhID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gb3JpZ2luYWxEYXRhICYmIFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShvcmlnaW5hbERhdGEuZGF0YSkgPyBvcmlnaW5hbERhdGEuZGF0YS5sZW5ndGggOiAnTi9BJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgZGF0YSB0byBtYXRjaCB0aGUgZXhwZWN0ZWQgZm9ybWF0XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkRGF0YSA9IHRyYW5zZm9ybURhdGEob3JpZ2luYWxEYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coYFRyYW5zZm9ybWVkICR7dHJhbnNmb3JtZWREYXRhLmxlbmd0aH0gaXRlbXNgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJldHVybiB0aGUgdHJhbnNmb3JtZWQgZGF0YSB0byB0aGUgY2xpZW50XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHRyYW5zZm9ybWVkRGF0YSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQT1NUIGF0dGVtcHQgZmFpbGVkIHdpdGggc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfSwgdHJ5aW5nIEdFVC4uLmApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKHBvc3RFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ1BPU1QgcmVxdWVzdCBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBHRVQ6JywgcG9zdEVycm9yKTtcbiAgICB9XG5cbiAgICAvLyBJZiBQT1NUIGZhaWxlZCwgdHJ5IEdFVCBtZXRob2QgYXMgZmFsbGJhY2tcbiAgICBjb25zdCBlbmNvZGVkUXVlcnkgPSBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpO1xuICAgIGNvbnN0IGdldFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vNjEyZC0xNjQtNjctNzAtMjMyLm5ncm9rLWZyZWUuYXBwL3F1ZXJ5P3F1ZXJ5PSR7ZW5jb2RlZFF1ZXJ5fWAsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIWdldFJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFeHRlcm5hbCBBUEkgZXJyb3IgKGJvdGggUE9TVCBhbmQgR0VUIGZhaWxlZCk6JywgZ2V0UmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKGdldFJlc3BvbnNlLnN0YXR1cykuanNvbih7IFxuICAgICAgICBlcnJvcjogYEV4dGVybmFsIEFQSSBlcnJvcjogJHtnZXRSZXNwb25zZS5zdGF0dXN9ICR7Z2V0UmVzcG9uc2Uuc3RhdHVzVGV4dH1gIFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0T3JpZ2luYWxEYXRhID0gYXdhaXQgZ2V0UmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKCdQcm94eSBBUEkgcmVjZWl2ZWQgZGF0YSBmcm9tIEdFVDonLCBKU09OLnN0cmluZ2lmeShnZXRPcmlnaW5hbERhdGEpLnN1YnN0cmluZygwLCAyMDApICsgJy4uLicpO1xuICAgIFxuICAgIC8vIExvZyB0aGUgc3RydWN0dXJlIG9mIHRoZSByZXNwb25zZSB0byBoZWxwIHdpdGggZGVidWdnaW5nXG4gICAgY29uc29sZS5sb2coJ0dFVCByZXNwb25zZSBzdHJ1Y3R1cmU6Jywge1xuICAgICAgdHlwZTogdHlwZW9mIGdldE9yaWdpbmFsRGF0YSxcbiAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoZ2V0T3JpZ2luYWxEYXRhKSxcbiAgICAgIGtleXM6IGdldE9yaWdpbmFsRGF0YSAmJiB0eXBlb2YgZ2V0T3JpZ2luYWxEYXRhID09PSAnb2JqZWN0JyA/IE9iamVjdC5rZXlzKGdldE9yaWdpbmFsRGF0YSkgOiAnTi9BJyxcbiAgICAgIGhhc1N0YXR1czogZ2V0T3JpZ2luYWxEYXRhICYmIHR5cGVvZiBnZXRPcmlnaW5hbERhdGEgPT09ICdvYmplY3QnICYmICdzdGF0dXMnIGluIGdldE9yaWdpbmFsRGF0YSxcbiAgICAgIGhhc0RhdGE6IGdldE9yaWdpbmFsRGF0YSAmJiB0eXBlb2YgZ2V0T3JpZ2luYWxEYXRhID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gZ2V0T3JpZ2luYWxEYXRhLFxuICAgICAgZGF0YVR5cGU6IGdldE9yaWdpbmFsRGF0YSAmJiB0eXBlb2YgZ2V0T3JpZ2luYWxEYXRhID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gZ2V0T3JpZ2luYWxEYXRhID8gXG4gICAgICAgIChBcnJheS5pc0FycmF5KGdldE9yaWdpbmFsRGF0YS5kYXRhKSA/ICdhcnJheScgOiB0eXBlb2YgZ2V0T3JpZ2luYWxEYXRhLmRhdGEpIDogJ04vQScsXG4gICAgICBkYXRhTGVuZ3RoOiBnZXRPcmlnaW5hbERhdGEgJiYgdHlwZW9mIGdldE9yaWdpbmFsRGF0YSA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIGdldE9yaWdpbmFsRGF0YSAmJiBcbiAgICAgICAgQXJyYXkuaXNBcnJheShnZXRPcmlnaW5hbERhdGEuZGF0YSkgPyBnZXRPcmlnaW5hbERhdGEuZGF0YS5sZW5ndGggOiAnTi9BJ1xuICAgIH0pO1xuXG4gICAgLy8gVHJhbnNmb3JtIHRoZSBkYXRhIHRvIG1hdGNoIHRoZSBleHBlY3RlZCBmb3JtYXRcbiAgICBjb25zdCB0cmFuc2Zvcm1lZEdldERhdGEgPSB0cmFuc2Zvcm1EYXRhKGdldE9yaWdpbmFsRGF0YSk7XG4gICAgY29uc29sZS5sb2coYFRyYW5zZm9ybWVkICR7dHJhbnNmb3JtZWRHZXREYXRhLmxlbmd0aH0gaXRlbXMgZnJvbSBHRVQgcmVzcG9uc2VgKTtcbiAgICBcbiAgICAvLyBSZXR1cm4gdGhlIHRyYW5zZm9ybWVkIGRhdGEgdG8gdGhlIGNsaWVudFxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHRyYW5zZm9ybWVkR2V0RGF0YSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTZXJ2ZXIgZXJyb3IgaW4gcHJveHkgQVBJOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBkYXRhIGZyb20gZXh0ZXJuYWwgQVBJJyB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsidHJhbnNmb3JtRGF0YSIsIm9yaWdpbmFsRGF0YSIsInN0YXR1cyIsIkFycmF5IiwiaXNBcnJheSIsImRhdGEiLCJtYXAiLCJpdGVtIiwiaW5kZXgiLCJ0cmFuc2Zvcm1JdGVtIiwicmVzdWx0cyIsInByb2R1Y3RzIiwiY29uc29sZSIsIndhcm4iLCJ0cmFuc2Zvcm1lZEl0ZW0iLCJpZCIsIm5hbWUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiaW1hZ2UiLCJpbWFnZXMiLCJsZW5ndGgiLCJpbWFnZVVybCIsImltYWdlX3VybCIsImltZyIsInByaWNlIiwidG9GaXhlZCIsInJhdGluZyIsInJldmlld3MiLCJyZWR1Y2UiLCJzdW0iLCJyZXZpZXciLCJjYXRlZ29yeSIsInJldmlld3NDb3VudCIsImF0dHJpYnV0ZXMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwianNvbiIsImVycm9yIiwicXVlcnkiLCJib2R5IiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJzdWJzdHJpbmciLCJ0eXBlIiwia2V5cyIsIk9iamVjdCIsImhhc1N0YXR1cyIsImhhc0RhdGEiLCJkYXRhVHlwZSIsImRhdGFMZW5ndGgiLCJ0cmFuc2Zvcm1lZERhdGEiLCJwb3N0RXJyb3IiLCJlbmNvZGVkUXVlcnkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZXRSZXNwb25zZSIsInN0YXR1c1RleHQiLCJnZXRPcmlnaW5hbERhdGEiLCJ0cmFuc2Zvcm1lZEdldERhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/search.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/search.ts"));
module.exports = __webpack_exports__;

})();